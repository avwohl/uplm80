/*
 * SIMPLE TEST - PRINT NUMBER 300
 */

0100H:

TESTSUITE:
DO;

MON1: PROCEDURE(FUNC, PARM) EXTERNAL;
    DECLARE FUNC BYTE, PARM ADDRESS;
END MON1;

/* PRINT SINGLE CHARACTER */
PRINT$CHAR: PROCEDURE(C);
    DECLARE C BYTE;
    CALL MON1(2, C);
END PRINT$CHAR;

/* PRINT UNSIGNED 16-BIT NUMBER */
PRINT$NUM: PROCEDURE(N);
    DECLARE N ADDRESS;
    DECLARE BUFFER(6) BYTE;
    DECLARE I BYTE;

    IF N = 0 THEN DO;
        CALL PRINT$CHAR('0');
        RETURN;
    END;

    I = 0;
    DO WHILE N > 0;
        BUFFER(I) = (N MOD 10) + '0';
        N = N / 10;
        I = I + 1;
    END;

    /* PRINT DIGITS IN REVERSE ORDER */
    DO WHILE I > 0;
        I = I - 1;
        CALL PRINT$CHAR(BUFFER(I));
    END;
END PRINT$NUM;

/* SIMPLE MAIN */
MAIN: PROCEDURE;
    CALL PRINT$NUM(300);
    CALL PRINT$CHAR(13);
    CALL PRINT$CHAR(10);
END MAIN;

CALL MAIN;

END TESTSUITE;

EOF
